<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ğŸ’¼ Cashflow Rush â€” Career Edition (v3.1.4) â€” README</title>
  <style>
    :root{
      --bg:#0a1228;--ink:#f5f8ff;--muted:#a8b8d8;--card:#101a3a;--line:#1a2655;--accent:#2dd36f;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{
      height:100%;
      background:var(--bg);
      color:var(--ink);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial,sans-serif;
      overflow:hidden;
    }
    header{
      position:fixed;top:0;left:0;right:0;z-index:10;
      background:#0c1533;border-bottom:1px solid var(--line);
      padding:12px 16px;text-align:center;
      font-size:15px;line-height:1.5;color:var(--muted);
    }
    header h1{font-size:17px;color:var(--ink);margin:0;font-weight:600;}
    header p{font-size:13px;color:var(--muted);}
    main{
      position:absolute;top:110px;left:0;right:0;bottom:0;
      overflow-y:auto;
      padding:30px 18px 40px 18px;
      background:radial-gradient(1200px 800px at 20% -10%,#141f45 0%, var(--bg) 60%) fixed;
    }
    main h2, main h3{color:var(--accent);margin-top:22px}
    main h2:first-of-type{margin-top:0}
    main table{width:100%;border-collapse:collapse;margin:10px 0 20px 0}
    main th,main td{border:1px solid var(--line);padding:6px 8px;text-align:left;font-size:14px}
    main th{background:#0c1533}
    main p{margin:10px 0;font-size:15px;line-height:1.6;color:var(--ink)}
    main ul, main ol{margin:10px 0 10px 20px}
    main li{margin-bottom:4px}
    code{background:#0c1533;border-radius:4px;padding:2px 4px;font-size:90%}
    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}
    blockquote{border-left:3px solid var(--accent);margin:14px 0;padding-left:10px;color:#bcd2ff}
    hr{border:0;border-top:1px solid var(--line);margin:20px 0}
    footer{text-align:center;color:#9db0d0;font-size:12px;margin-top:40px;opacity:.6}
    .btn{
      display:inline-block;background:#0c1533;color:#e9f1ff;border:1px solid #3a4a8d;
      padding:10px 18px;border-radius:999px;font-weight:600;margin-top:20px;
    }
    .btn:hover{border-color:var(--accent)}
  </style>
</head>

<body>
  <header>
    <h1>ğŸ’¼ Cashflow Rush â€” Career Edition (v3.1.4)</h1>
    <p>Arcade rompicapo finanziario in stile â€œpush-boxâ€ con progressione a 10 livelli di difficoltÃ  crescente.<br>
       Ottimizzato per <b>Laptop (tastiera)</b> e <b>Smartphone (touch + D-pad)</b>.<br>
       Funziona <b>offline</b> come Progressive Web App (PWA).</p>
  </header>

  <main>
    <!-- Intro / Come si gioca -->
    <h2>ğŸ® Come si gioca</h2>
    <p>Sposta il personaggio sulla griglia e spingi gli <strong>Asset (blu)</strong> verso i <strong>Goal (verdi)</strong> per attivarli e generare rendite passive.</p>

    <h3>Eventi economici:</h3>
    <table>
      <thead><tr><th>Simbolo</th><th>Evento</th><th>Effetto</th></tr></thead>
      <tbody>
        <tr><td>ğŸ’° <code>$</code></td><td>Monete</td><td>+500 Valore Netto</td></tr>
        <tr><td>ğŸ’§ <code>D</code></td><td>Dividendo</td><td>+200 Flusso â‚¬/mossa</td></tr>
        <tr><td>âš™ï¸ <code>L</code></td><td>Leva</td><td>+600 Flusso, âˆ’400 Valore Netto</td></tr>
        <tr><td>ğŸ”¥ <code>I</code></td><td>Inflazione</td><td>âˆ’200 Flusso</td></tr>
        <tr><td>ğŸ’¸ <code>T</code></td><td>Tassa</td><td>âˆ’800 Valore Netto</td></tr>
      </tbody>
    </table>

    <p>Ogni mossa incassa il tuo <strong>Flusso â‚¬/mossa</strong>. Gli Asset attivati su un Goal generano extra per alcune mosse.</p>
    <p>ğŸ¯ Completa il livello raggiungendo lâ€™<strong>Obiettivo (Valore Netto)</strong>.</p>
    <blockquote>âš–ï¸ <em>Anti-grind attivo:</em> nessun incasso se ripeti micro-loop avanti/indietro senza raccogliere eventi o spingere asset.</blockquote>

    <hr>

    <!-- Legenda -->
    <h2>ğŸ§­ Simboli &amp; Legenda</h2>
    <table>
      <thead><tr><th>Colore</th><th>Simbolo</th><th>Significato</th></tr></thead>
      <tbody>
        <tr><td>ğŸŸ¡</td><td><code>$</code></td><td>Monete</td></tr>
        <tr><td>ğŸ”µ</td><td><code>D</code></td><td>Dividendo</td></tr>
        <tr><td>ğŸŸ£</td><td><code>L</code></td><td>Leva Finanziaria</td></tr>
        <tr><td>ğŸŸ </td><td><code>I</code></td><td>Inflazione</td></tr>
        <tr><td>ğŸ”´</td><td><code>T</code></td><td>Tassa</td></tr>
        <tr><td>ğŸŸ©</td><td><code>G</code></td><td>Goal (attiva Asset sovrapposto)</td></tr>
        <tr><td>ğŸŸ¦</td><td><code>A</code></td><td>Asset spingibile</td></tr>
        <tr><td>â¬›</td><td><code>#</code></td><td>Muro</td></tr>
      </tbody>
    </table>

    <hr>

    <!-- KPI -->
    <h2>ğŸ“Š KPI in tempo reale</h2>
    <table>
      <thead><tr><th>KPI</th><th>Descrizione</th></tr></thead>
      <tbody>
        <tr><td><strong>Valore Netto</strong></td><td>Capitale cumulato (target del livello).</td></tr>
        <tr><td><strong>Flusso â‚¬/mossa</strong></td><td>Entrata netta per ogni mossa.</td></tr>
        <tr><td><strong>Mosse</strong></td><td>Numero di mosse effettuate.</td></tr>
        <tr><td><strong>Obiettivo</strong></td><td>Traguardo da raggiungere per completare il livello.</td></tr>
        <tr><td><strong>Efficienza</strong></td><td>Indicatore % â‰ˆ (Netto/Mosse)/10.</td></tr>
        <tr><td><strong>Reputazione â˜…</strong></td><td>+1 stella se completi il livello senza mai chiudere in negativo.</td></tr>
      </tbody>
    </table>
    <p>Su <strong>smartphone</strong> Ã¨ incluso il pulsante <strong>ğŸ“Š Report</strong> che mostra il riepilogo di: Livello, Obiettivo, Valore Netto, Flusso, Mosse, Efficienza e Reputazione.</p>

    <hr>

    <!-- Career Mode -->
    <h2>ğŸ Livelli (Career Mode)</h2>
    <table>
      <thead><tr><th style="text-align:center">#</th><th>Nome</th><th style="text-align:right">Target</th></tr></thead>
      <tbody>
        <tr><td style="text-align:center">1</td><td>Risparmio</td><td style="text-align:right">5.000â‚¬</td></tr>
        <tr><td style="text-align:center">2</td><td>Investimento</td><td style="text-align:right">15.000â‚¬</td></tr>
        <tr><td style="text-align:center">3</td><td>Leva Finanziaria</td><td style="text-align:right">30.000â‚¬</td></tr>
        <tr><td style="text-align:center">4</td><td>Inflazione</td><td style="text-align:right">50.000â‚¬</td></tr>
        <tr><td style="text-align:center">5</td><td>Speculazione</td><td style="text-align:right">80.000â‚¬</td></tr>
        <tr><td style="text-align:center">6</td><td>Diversificazione</td><td style="text-align:right">120.000â‚¬</td></tr>
        <tr><td style="text-align:center">7</td><td>Crisi</td><td style="text-align:right">150.000â‚¬</td></tr>
        <tr><td style="text-align:center">8</td><td>Ripresa</td><td style="text-align:right">220.000â‚¬</td></tr>
        <tr><td style="text-align:center">9</td><td>Bolla</td><td style="text-align:right">350.000â‚¬</td></tr>
        <tr><td style="text-align:center">10</td><td>Tycoon Finale</td><td style="text-align:right">1.000.000â‚¬</td></tr>
      </tbody>
    </table>
    <blockquote>Layout e generazione griglia sono deterministici (seed fissi), garantendo stabilitÃ  tra sessioni.</blockquote>

    <hr>

    <!-- Controlli -->
    <h2>âŒ¨ï¸ / ğŸ“± Controlli</h2>

    <h3>Laptop</h3>
    <ul>
      <li><strong>Frecce</strong> â€” Muoviti / spingi Asset</li>
      <li><strong>R</strong> â€” Ricarica livello</li>
      <li><strong>Ctrl/Cmd + Z</strong> â€” Undo ultima mossa</li>
      <li><strong>Toolbar</strong> â€” Reset, Undo, ğŸ“ˆ Livelli, ğŸ”Š/ğŸ”‡ Audio, ğŸ“Š Report</li>
    </ul>

    <h3>Smartphone</h3>
    <ul>
      <li><strong>PLAY</strong> â€” Inizia la partita (sblocca audio su iOS)</li>
      <li><strong>D-pad (â–² â—€ â–¶ â–¼)</strong> o <strong>Swipe</strong> sul canvas</li>
      <li><strong>ğŸ“Š Report</strong> â€” Mostra riepilogo livello</li>
    </ul>

    <hr>

    <!-- iOS A2HS -->
    <h2>ğŸ“± Suggerimento iOS: Aggiungi alla Home</h2>
    <p>Su iPhone/iPad, per unâ€™esperienza fluida e con audio attivo:</p>
    <ol>
      <li>Tocca <strong>Condividi (â¬†ï¸)</strong> nella barra in basso</li>
      <li>Seleziona <strong>â€œAggiungi alla schermata Homeâ€</strong></li>
      <li>Apri lâ€™icona <strong>Cashflow Rush</strong> appena creata</li>
    </ol>
    <blockquote>Funziona anche <strong>offline</strong> come una vera App. ğŸš€</blockquote>
    <p>Lâ€™overlay di guida appare <strong>solo la prima volta</strong> se lâ€™app non Ã¨ ancora installata come PWA.</p>

    <hr>

    <!-- PWA -->
    <h2>âš™ï¸ PWA â€” Installazione &amp; Aggiornamenti</h2>
    <ul>
      <li>Installabile su iOS, Android e Desktop</li>
      <li><strong>Aggiornamento automatico:</strong> il Service Worker aggiorna i file quando rileva una nuova versione</li>
      <li>Versione attuale: <strong>v3.1.4</strong></li>
      <li>In <code>index.html</code>, <code>app.js</code>, <code>dual.js</code>, <code>sw.js</code> Ã¨ usata la query <code>?v=3.1.4</code></li>
      <li>Il Service Worker invia <code>SW_UPDATED</code> e forza il refresh automatico</li>
    </ul>
    <blockquote>Se noti risorse non aggiornate: apri lâ€™app, attendi due refresh â€” non serve svuotare la cache manualmente.</blockquote>

    <hr>

    <!-- Parametri di gioco -->
    <h2>âš–ï¸ Parametri di Gioco (default)</h2>
    <table>
      <thead><tr><th>Evento</th><th>Effetto</th></tr></thead>
      <tbody>
        <tr><td>Monete</td><td>+500 Netto</td></tr>
        <tr><td>Dividendo</td><td>+200 Flusso</td></tr>
        <tr><td>Leva</td><td>+600 Flusso, âˆ’400 Netto</td></tr>
        <tr><td>Inflazione</td><td>âˆ’200 Flusso</td></tr>
        <tr><td>Tassa</td><td>âˆ’800 Netto</td></tr>
        <tr><td>Asset attivo</td><td>+100 Netto/mossa per un numero limitato di mosse</td></tr>
        <tr><td>Decadimento</td><td>ogni 7 mosse il Flusso si riduce di 100</td></tr>
      </tbody>
    </table>

    <hr>

    <!-- Anti-Grind -->
    <h2>ğŸš« Anti-Grind</h2>
    <p>Il sistema disattiva guadagni da flusso/asset se:</p>
    <ul>
      <li>ti muovi indietro immediatamente rispetto alla direzione precedente,</li>
      <li>oppure esegui un micro-loop Aâ†’Bâ†’A senza raccogliere o spingere asset.</li>
    </ul>
    <p>Serve a mantenere la sfida pulita, evitando farming.</p>

    <hr>

    <!-- Progressi -->
    <h2>ğŸ§© Progressi e Reset</h2>
    <ul>
      <li><strong>ğŸ“ˆ Livelli</strong> â€” Salta a un livello specifico</li>
      <li><strong>â†º Restart Career</strong> â€” Azzera progressi e reputazione</li>
      <li>I progressi sono salvati localmente:
        <ul>
          <li><code>cfr.level</code>, <code>cfr.rep</code>, <code>cfr.muted</code>, <code>du.mode</code></li>
        </ul>
      </li>
    </ul>

    <hr>

    <!-- Deploy -->
    <h2>ğŸš€ Deploy / Hosting</h2>
    <ol>
      <li>Copia la cartella su un server statico (HTTPS consigliato)</li>
      <li>Assicurati di servire correttamente MIME type (JS, JSON, PNG, Webmanifest)</li>
      <li>Aggiorna le query di versione (<code>?v=</code>) in <code>index.html</code>, <code>sw.js</code> e <code>dual.js</code></li>
      <li>Incrementa la versione in:
        <ul>
          <li><code>&lt;title&gt;</code> e file JS</li>
          <li><code>const VER</code> in <code>sw.js</code></li>
        </ul>
      </li>
    </ol>

    <hr>

    <!-- OriginalitÃ  -->
    <h2>ğŸ§¾ Dichiarazione di OriginalitÃ  e Copyright</h2>
    <p><strong>ğŸ’¼ Cashflow Rush â€” Career Edition</strong> Ã¨ un progetto originale sviluppato da <strong>Alessandro Pezzali (pezzaliAPP)</strong>.<br>
    Non esiste alcun titolo identico o equivalente pubblicato o registrato con lo stesso nome, regole o struttura.</p>

    <p>Il gioco si ispira liberamente al genere <strong>Sokoban</strong> (Hiroyuki Imabayashi, 1981), ma lâ€™ispirazione Ã¨ puramente meccanica (spostamento e spinta di oggetti in una griglia).<br>
    Tutti gli altri elementi â€” <strong>tema economico-finanziario, KPI, modalitÃ  Career, sistema anti-grind, interfaccia PWA e finalitÃ  educativa</strong> â€” sono opere inedite e frutto di sviluppo autonomo.</p>

    <h3>ğŸ”¹ Elementi distintivi e originali</h3>
    <ol>
      <li><strong>Tema e semantica</strong> â€” Asset, monete, tasse, inflazione, dividendi e leva sostituiscono i blocchi tradizionali, introducendo significato economico e didattico.</li>
      <li><strong>Career Mode</strong> â€” Progressione con indicatori reali: Valore Netto, Flusso â‚¬/mossa, Efficienza, Reputazione â˜….</li>
      <li><strong>Motore anti-grind</strong> â€” Prevenzione automatica di loop e micro-mosse senza valore economico.</li>
      <li><strong>Architettura PWA</strong> â€” Gioco installabile e offline-first, adattivo per mobile e desktop.</li>
      <li><strong>FinalitÃ  educativa</strong> â€” Serious game per lâ€™apprendimento dei principi di finanza personale e gestione delle risorse.</li>
    </ol>

    <h3>ğŸ”¹ Status legale</h3>
    <ul>
      <li>âœ… Originale e non derivativo: nessun codice, grafica o asset proviene da opere terze.</li>
      <li>âœ… TitolaritÃ  completa del nome, codice sorgente, logica, interfaccia e contenuti.</li>
      <li>âœ… Licenza MIT: il codice Ã¨ open source, liberamente utilizzabile e modificabile nel rispetto dei termini.</li>
      <li>ğŸš« Nessun uso di materiali protetti (marchi, loghi, colonne sonore, elementi grafici commerciali).</li>
    </ul>

    <hr>

    <!-- Troubleshooting -->
    <h2>ğŸ› ï¸ Troubleshooting</h2>
    <table>
      <thead><tr><th>Problema</th><th>Soluzione</th></tr></thead>
      <tbody>
        <tr><td>PLAY non parte su iPhone</td><td>Tocca il canvas o il pulsante PLAY una volta per sbloccare lâ€™audio</td></tr>
        <tr><td>Audio assente</td><td>Controlla ğŸ”Š/ğŸ”‡ e modalitÃ  silenziosa</td></tr>
        <tr><td>Aggiornamento non visibile</td><td>Apri lâ€™app e attendi due refresh</td></tr>
        <tr><td>Lag o resize su mobile</td><td>Seleziona <strong>Auto</strong> o <strong>Smartphone</strong> nel menu superiore</td></tr>
        <tr><td>Overlay iOS non piÃ¹ visibile</td><td>Cancella <code>localStorage['pwa.tipShown']</code> e ricarica</td></tr>
      </tbody>
    </table>

    <hr>

    <!-- Licenza & Autore -->
    <h2>ğŸ§¾ License</h2>
    <p>MIT Â© 2025 <strong>pezzaliAPP</strong></p>

    <footer>ğŸ“ <strong>Autore:</strong> <a href="https://www.alessandropezzali.it">Alessandro Pezzali</a> â€¢
      <strong>Progetto:</strong> <a href="https://www.pezzaliapp.com">pezzaliAPP.com</a></footer>

    <p style="text-align:center;">
      <a href="https://www.alessandropezzali.it/CashflowRushPWA/" class="btn">â¬…ï¸ Torna al Gioco</a>
    </p>
  </main>
</body>
</html>
